# 03-04-repo

## Лабораторная работа по АЦП
## Цель занятия
Усвоить принципы преобразования аналогового напряжения в цифровой код

## Новые определения
* компаратор
* тройка-модуль
* аналогово-цифровой преобразователь (АЦП, ADC)
* паралелльные (Флэш) АЦП (Flash ADC)
* последовательные АЦП
* АЦП поразрядного уравновешивания (SAR ADC Successive-approximation ADC))
* частота дискретизации

## Нужно научиться
* использовать компоненты тройка-модуль
* работать с компоратором
* реализовывать алгоритмы АЦП на основе ЦАП и компоратора


## Задача №1. "Простейший" АЦП
Написать скрипт, который реализует АЦП при помощи последовательного перебора значений

* создать скрипт 5-1-adc-simple.py
* в созданном скрипте импортировать модуль работы с GPIO на Raspberry Pi
* объявить переменную dac - список указанных на плате номеров GPIO-пинов в области DAC
* объявить переменную comp - c номером GPIO-пина, указанного на плате в секции COMP
* объявить переменную troyka - c номером GPIO-пина, указанного на плате в секции TROYKA MODULE
* настроить режим обращения к GPIO
* одной строкой кода настроить на выход все 8 GPIO-пинов из списка dac
* настроить на выход GPIO-пин тройка-модуля и задать значение по умолчанию при помощи аргумента initial в функции GPIO.setup
* настроить на вход GPIO-пин comp
* добавить функцию перевода десятичного числа в список 0 и 1 из прошлого занятия
* описать функцию adc(), которая возвращает десятичное число, пропорциональное напряжению клемме S тройка-модуля
* в функции должен выполнятся последовательный перебор значений и установка их на dac и считывание значения с comp
* добавить в скрипт два блока: try и finally
* в блоке finally подать 0 на все использовавшиеся выходные пины и очистить настройки GPIO
* в блоке try:
* * в бесконечном цикле вызывать функцию adc()
* * возвращаемое значение функции переводить в напряжение
* * на экран выводить цифровое значение и соответствующее ему значение напряжения

При запуске скрипта для установления напряжения на SIG воспользоваться потенциометром. Проверить напряжение на клемме S при помощи мультиметра и сравнить с выведенным на экран


## Задача №2. АЦП последовательного приближения (поразрядного уравновешивания)
Написать скрипт, реализующий алгоритм последовательного приближения АЦП

* создать скрипт 5-2-adc-sar.py
* выполнить пункты из предыдущего задания
* в функции adc() реализовать алгоритм последовательного приближения, описанный в видео "5-3 - АЦП - Последовательный АЦП"

По очереди запустить этот скрипт и скрипт предыдущей задачи и сравнить время работы двух алгоритмов аналогово-цифрового преобразования


## Задача №3. "Громкость"
При помощи алгоритма АЦП отобразить величину напряжения в области leds. Для примера:

* создать скрипт 5-3-adc-volume.py
* выполнить пункты из предыдущего задания
* в блоке try:
* * в бесконечном цикле вызывать функцию adc()
* * преобразовать возвращаемое значение и выдать его на leds при помощи функции c прошлого занятия
* * обратите внимание, что при напряжении 0В все светодиоды погашены, при напряжении 3.3В все светодиоды должны гореть, при 1.67В должны гореть 4 светодиода из 8

* проверить работу с использованием АЦП из первой задачи
* проверить работу с использованием АЦП из второй задачи